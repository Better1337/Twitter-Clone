{% extends 'layout.html' %}
{% load static %}
{% block content %}

<h1>Search Users</h1>
<form method="POST">
    {% csrf_token %}
    <div class="mb-3">
        <input type="input" class="form-control" placeholder="Search Users" name="search" required>
    </div>
    <button type="submit">Search</button>
</form>
{% if search %}
<h2>Search Results For: {{ search }} </h2>
{% if searched_users %}
    <div class="row row-cols-1 row-cols-md-2 g-4">
        {% for user in searched_users %}
            <div class="col">
                <div class="card h-100">
                    <div class="row g-0">
                        <div class="col-md-4">
                            {% if user.profile.profile_image %}
                                <img src="{{ user.profile.profile_image.url }}" class="img-thumbnail" style="width: 200px; height: 200px;">
                            {% else %}
                                <img src="{% static 'images/userbasicicon.jpg' %}" class="img-thumbnail" style="width: 200px; height: 200px;">
                            {% endif %}
                        </div>
                        <div class="col-md-8">
                            <div class="card-body">
                                <h5 class="card-title">{{ user.username }}</h5>
                                <p class="card-text"><a href="{% url 'profile' pk=user.profile.pk %}">@{{ user.username }}</a></p>
                                <p class="card-text"><small class="text-body-secondary">{{ user.profile.date_modified|date:"Y-m-d H:i" }}</small></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
{% else %}
    <p>No results found.</p>
{% endif %}
{% endif %}
{% endblock %}
